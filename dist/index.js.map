{"version":3,"sources":["webpack://fjsx/webpack/bootstrap","webpack://fjsx/./lib/observable-array.ts","webpack://fjsx/./lib/f.ts","webpack://fjsx/./lib/context.ts","webpack://fjsx/./lib/dom-tree.ts","webpack://fjsx/./lib/dom.ts","webpack://fjsx/./index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","ObservableArray","items","_self","this","_array","_handlers","itemadded","itemremoved","itemset","defineIndexProperty","index","set","v","raiseEvent","type","item","event","forEach","h","on","eventName","handler","push","off","ln","length","splice","arguments","pop","unshift","shift","howMany","removed","Number","RangeError","apply","Array","getOwnPropertyNames","writable","toJSON","observable_array_1","freezed","innerFn","val","isArray","innerArray","computes","compute","Function","array","arr","$val","callback","fn","args","initCompute","cValue","cmpInner","setCompute","prev","destroy","appContext","startContext","key","getContextValue","endContext","Context","props","jsxEventProperty","Fragment","Symbol","setElementAttributes","element","attributes","forceSetAttr","attribute","attributeName","test","toLowerCase","indexOf","setAttribute","createElement","tagName","childs","document","createDocumentFragment","addChildElements","createSvgElement","createElementNS","appendChild","Node","createTextNode","didMount","parent","f_1","conditionalElement","parentElement","oldElement","newElement","replaceChild","insertToDom","itemElement","insertBefore","childNodes","arrayMap","parentDom","renderReturn","oArr","e","removeChild","textContent","childElementCount","__export"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","// https://stackoverflow.com/questions/5100376/how-to-watch-for-array-changes\nexport function ObservableArray(items) {\n  var _self = this,\n    _array = [],\n    _handlers = {\n      itemadded: [],\n      itemremoved: [],\n      itemset: []\n    };\n\n  function defineIndexProperty(index) {\n    if (!(index in _self)) {\n      Object.defineProperty(_self, index, {\n        configurable: true,\n        enumerable: true,\n        get: function() {\n          return _array[index];\n        },\n        set: function(v) {\n          _array[index] = v;\n          raiseEvent({\n            type: \"itemset\",\n            index: index,\n            item: v\n          });\n        }\n      });\n    }\n  }\n\n  function raiseEvent(event) {\n    _handlers[event.type].forEach(function(h) {\n      h.call(_self, event);\n    });\n  }\n\n  _self.on = function(eventName, handler) {\n    _handlers[eventName].push(handler);\n  };\n\n  _self.off = function(eventName, handler) {\n    var h = _handlers[eventName];\n    var ln = h.length;\n    while (--ln >= 0) {\n      if (h[ln] === handler) {\n        h.splice(ln, 1);\n      }\n    }\n  };\n\n  _self.push = function() {\n    var index;\n    for (var i = 0, ln = arguments.length; i < ln; i++) {\n      index = _array.length;\n      _array.push(arguments[i]);\n      defineIndexProperty(index);\n      raiseEvent({\n        type: \"itemadded\",\n        index: index,\n        item: arguments[i]\n      });\n    }\n    return _array.length;\n  };\n\n  _self.pop = function() {\n    if (_array.length > -1) {\n      var index = _array.length - 1,\n        item = _array.pop();\n      delete _self[index];\n      raiseEvent({\n        type: \"itemremoved\",\n        index: index,\n        item: item\n      });\n      return item;\n    }\n  };\n\n  _self.unshift = function() {\n    for (var i = 0, ln = arguments.length; i < ln; i++) {\n      _array.splice(i, 0, arguments[i]);\n      defineIndexProperty(_array.length - 1);\n      raiseEvent({\n        type: \"itemadded\",\n        index: i,\n        item: arguments[i]\n      });\n    }\n    for (; i < _array.length; i++) {\n      raiseEvent({\n        type: \"itemset\",\n        index: i,\n        item: _array[i]\n      });\n    }\n    return _array.length;\n  };\n\n  _self.shift = function() {\n    if (_array.length > -1) {\n      var item = _array.shift();\n      delete _self[_array.length];\n      raiseEvent({\n        type: \"itemremoved\",\n        index: 0,\n        item: item\n      });\n      return item;\n    }\n  };\n\n  _self.splice = function(index, howMany /*, element1, element2, ... */) {\n    var removed = [],\n      item,\n      pos;\n\n    index = index == null ? 0 : index < 0 ? _array.length + index : index;\n\n    howMany =\n      howMany == null ? _array.length - index : howMany > 0 ? howMany : 0;\n\n    while (howMany--) {\n      item = _array.splice(index, 1)[0];\n      removed.push(item);\n      delete _self[_array.length];\n      raiseEvent({\n        type: \"itemremoved\",\n        index: index + removed.length - 1,\n        item: item\n      });\n    }\n\n    for (var i = 2, ln = arguments.length; i < ln; i++) {\n      _array.splice(index, 0, arguments[i]);\n      defineIndexProperty(_array.length - 1);\n      raiseEvent({\n        type: \"itemadded\",\n        index: index,\n        item: arguments[i]\n      });\n      index++;\n    }\n\n    return removed;\n  };\n\n  Object.defineProperty(_self, \"length\", {\n    configurable: false,\n    enumerable: false,\n    get: function() {\n      return _array.length;\n    },\n    set: function(value) {\n      var n = Number(value);\n      var length = _array.length;\n      if (n % 1 === 0 && n >= 0) {\n        if (n < length) {\n          _self.splice(n);\n        } else if (n > length) {\n          _self.push.apply(_self, new Array(n - length));\n        }\n      } else {\n        throw new RangeError(\"Invalid array length\");\n      }\n      _array.length = n;\n      return value;\n    }\n  });\n\n  Object.defineProperty(_self, \"innerArray\", {\n    configurable: false,\n    enumerable: false,\n    get: function() {\n      return _array;\n    },\n    set: function(v) {\n      // _self.push.apply(_self, v); // renderAll\n      _array = v;\n    }\n  });\n\n  Object.getOwnPropertyNames(Array.prototype).forEach(function(name) {\n    if (!(name in _self)) {\n      Object.defineProperty(_self, name, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: Array.prototype[name]\n      });\n    }\n  });\n\n  _self.toJSON = () => {\n    return _array;\n  };\n\n  if (items instanceof Array) {\n    _self.push.apply(_self, items);\n  }\n}\n","import { ObservableArray } from \"./observable-array\";\r\n\r\nexport interface FJsxValue<T> {\r\n  (val: T): void;\r\n  readonly $val: T;\r\n  freezed: boolean;\r\n}\r\n\r\nexport type FjsxArrayEventType = \"itemadded\" | \"itemset\" | \"itemremoved\";\r\n\r\nexport const value = <T>(value: T, freezed?: boolean): FJsxValue<T> => {\r\n  const innerFn: any = (val?) => {\r\n    if (Array.isArray(val)) {\r\n      // TODO https://github.com/WebReflection/majinbuu\r\n      innerFn[\"$val\"].innerArray = val;\r\n    } else innerFn[\"$val\"] = val;\r\n    const computes = innerFn[\"computes\"];\r\n    if (computes.length)\r\n      for (var i = 0; i < computes.length; i++)\r\n        !computes[i][\"freezed\"] && computes[i](computes[i].compute());\r\n  };\r\n  innerFn[\"$val\"] = value;\r\n  innerFn[\"freezed\"] = freezed;\r\n\r\n  innerFn[\"computes\"] = [];\r\n  if (value instanceof Function) innerFn[\"compute\"] = value;\r\n  innerFn.toJSON = () => innerFn[\"$val\"];\r\n  return innerFn;\r\n};\r\n\r\nexport const array = <T>(\r\n  items: T[]\r\n): {\r\n  on?: (\r\n    type: FjsxArrayEventType,\r\n    callback: (e: { item: T; index: number }) => void\r\n  ) => void;\r\n  removeEventListener?: (type: FjsxArrayEventType) => void;\r\n  $val: T[];\r\n} => {\r\n  const arr = value(new ObservableArray(items)) as any;\r\n  arr.on = arr.$val.on;\r\n  arr.off = arr.$val.off;\r\n  arr.toJSON = () => arr.$val.innerArray;\r\n\r\n  return arr;\r\n};\r\n\r\nexport const on = (\r\n  arr: any[],\r\n  type: FjsxArrayEventType,\r\n  callback: (e: { item: any; index: number }) => void\r\n) => {\r\n  arr[\"$val\"].on(type, callback);\r\n};\r\n\r\nexport const off = (\r\n  arr: any[],\r\n  type: FjsxArrayEventType,\r\n  callback: (e: { item: any; index: number }) => void\r\n) => {\r\n  arr[\"$val\"].off(type, callback);\r\n};\r\n\r\nexport const compute = (fn: () => void, ...args: any[]) => {\r\n  var compute = value(fn);\r\n  for (var i = 0; i < args.length; i++) args[i][\"computes\"].push(compute);\r\n  fn();\r\n};\r\n\r\nexport const initCompute = (fn: () => any, ...args: any[]) => {\r\n  var cValue = value(fn());\r\n  var cmpInner = function() {\r\n    cValue(fn());\r\n  };\r\n  cmpInner[\"compute\"] = cValue;\r\n  for (var i = 0; i < args.length; i++) args[i][\"computes\"].push(cmpInner);\r\n\r\n  return cValue;\r\n};\r\n\r\nexport const setCompute = (prev: any, fn: () => void, ...args: any[]) => {\r\n  destroy(prev);\r\n  return initCompute(fn, ...args);\r\n};\r\n\r\nexport const destroy = (item: any) => {\r\n  delete item[\"compute\"];\r\n  delete item[\"computes\"];\r\n};\r\n","const appContext: { [key: string]: any[] } = {};\n\nexport const startContext = (key: string, value: any) => {\n  if (!appContext[key]) appContext[key] = [];\n  appContext[key].push(value);\n};\n\nexport const getContextValue = (key: string) => {\n  if (appContext[key]) return appContext[key][appContext[key].length - 1];\n};\n\nexport const endContext = (key: string) => {\n  appContext[key].pop();\n};\n\nexport const Context = (props: { key: string; value: any }) => null;\n","var jsxEventProperty = /^on[A-Z]/;\r\nconst svgNS = \"http://www.w3.org/2000/svg\";\r\nexport const Fragment = Symbol(\"fjsx.Fragment\");\r\n\r\nconst setElementAttributes = (\r\n  element: Element,\r\n  attributes,\r\n  forceSetAttr: boolean\r\n) => {\r\n  let attribute = null;\r\n  for (var attributeName in attributes) {\r\n    attribute = attributes[attributeName];\r\n    if (attribute instanceof Function) {\r\n      if (jsxEventProperty.test(attributeName)) {\r\n        attributeName = attributeName.toLowerCase();\r\n        element[attributeName] = attribute;\r\n      } else attribute(element);\r\n    } else if (attribute instanceof Object) {\r\n      //style\r\n      for (var key in attribute)\r\n        if (typeof attribute[key] === \"function\") attribute[key](element);\r\n    } else {\r\n      if (forceSetAttr || attributeName.indexOf(\"-\") !== -1)\r\n        element.setAttribute(attributeName, attribute);\r\n      else element[attributeName] = attribute;\r\n    }\r\n  }\r\n};\r\n\r\nexport const createElement = (\r\n  tagName: string | Function | Symbol,\r\n  attributes: { [key: string]: any },\r\n  ...childs: any[]\r\n) => {\r\n  let element = null;\r\n  if (tagName instanceof Function) {\r\n    if (attributes === null) attributes = {};\r\n    attributes[\"children\"] = childs;\r\n    element = (tagName as any)(attributes);\r\n    if (element) element[\"$props\"] = attributes;\r\n  } else {\r\n    if (tagName === Fragment) {\r\n      element = document.createDocumentFragment();\r\n    } else {\r\n      element = document.createElement(tagName as any);\r\n      attributes && setElementAttributes(element, attributes, false);\r\n    }\r\n    element[\"$props\"] = attributes;\r\n    childs && childs.length && addChildElements(element, childs);\r\n  }\r\n  return element;\r\n};\r\n\r\nexport const createSvgElement = (\r\n  tagName: string,\r\n  attributes: { [key: string]: any },\r\n  ...childs: any[]\r\n) => {\r\n  let element = document.createElementNS(svgNS, tagName);\r\n  attributes && setElementAttributes(element, attributes, true);\r\n  childs && childs.length && addChildElements(element, childs);\r\n  return element;\r\n};\r\n\r\nexport const addChildElements = (element, childs) => {\r\n  let props = null;\r\n  for (var i = 0; i < childs.length; i++) {\r\n    if (Array.isArray(childs[i])) addChildElements(element, childs[i]);\r\n    else if (childs[i] instanceof Function) childs[i](element);\r\n    else {\r\n      if (childs[i]) {\r\n        props = childs[i][\"$props\"];\r\n        element.appendChild(\r\n          childs[i] instanceof Node\r\n            ? childs[i]\r\n            : document.createTextNode(childs[i])\r\n        );\r\n        props && props.didMount && props.didMount(element, childs[i]);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport const createTextNode = parent => {\r\n  return parent.appendChild(document.createTextNode(\"\"));\r\n};\r\n","import { FJsxValue } from \"..\";\nimport { ObservableArray } from \"./observable-array\";\nimport { compute } from \"./f\";\n\nexport const conditionalElement = (parentElement, oldElement, newElement) => {\n  if (newElement instanceof Node === false)\n    newElement = document.createTextNode(newElement || \"\");\n  if (oldElement) parentElement.replaceChild(newElement, oldElement);\n  else parentElement.appendChild(newElement);\n  return newElement;\n};\n\nexport const insertToDom = (parentElement, index, itemElement) => {\n  if (itemElement instanceof Function) itemElement(parentElement);\n  else {\n    if (itemElement instanceof Node === false)\n      itemElement = document.createTextNode(itemElement);\n    parentElement.insertBefore(itemElement, parentElement.childNodes[index]);\n  }\n};\n\nexport const arrayMap = (\n  arr: FJsxValue<any[]>,\n  parentDom: HTMLElement,\n  renderReturn: (item: any, idx?: number, isInsert?: boolean) => void\n) => {\n  const oArr =\n    arr.$val instanceof ObservableArray\n      ? arr.$val\n      : new ObservableArray(arr.$val);\n\n  oArr.on(\"itemadded\", function(e) {\n    insertToDom(parentDom, e.index, renderReturn(e.item, e.index));\n  });\n\n  oArr.on(\"itemset\", function(e) {\n    parentDom.replaceChild(\n      renderReturn(e.item, e.index) as any,\n      parentDom.childNodes.item(e.index)\n    );\n  });\n\n  oArr.on(\"itemremoved\", function(e) {\n    parentDom.removeChild(parentDom.childNodes.item(e.index));\n  });\n  arr(oArr);\n\n  const renderAll = () => {\n    if (arr.$val.length === 0) parentDom.textContent = \"\";\n    else {\n      parentDom.textContent = \"\";\n      for (var i = parentDom.childElementCount; i < arr.$val.length; i++)\n        insertToDom(parentDom, i, renderReturn(arr.$val[i], i));\n    }\n  };\n  compute(renderAll, arr);\n};\n","/// <reference path=\"JSX.d.ts\" />\n\nexport * from \"./lib/f\";\nexport * from \"./lib/dom\";\nexport * from \"./lib/dom-tree\";\nexport * from \"./lib/context\";\n"],"sourceRoot":""}